- name: Obtain current 'boot system' values (before changes)
  import_tasks: current_bootsystem.yml

- name: Prompt to continue
  pause: 
    prompt: |

      >>>>>>>>>>>>>>>>>>
      You are about to change the boot variable on the device.

      Press "<cntr-c>" and then "a" to abort.

      Press return to continue.
      >>>>>>>>>>>>>>>>>>

- name: Update 'boot system' to new value
  ios_config:
    lines:
      - no boot system
      - "boot system flash {{ backup_image.name }}"
      - "boot system flash {{ primary_image.name }}"
    save_when: always
    # Force Ansible to always push all of the lines
    match: none
    backup: True

- name: Obtain current 'boot system' values (after changes)
  import_tasks: current_bootsystem.yml
